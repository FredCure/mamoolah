<% layout('layouts/boilerplate') %>

    <div class="col-6 offset-3">
        <h1 class="mt-3 mb-3">
            Edit Supplier Infos
        </h1>
        <div class="card border-secondary mb-3">
            <div class="card-header">
                <h3>
                    <%= thisSupplier.name %>
                </h3>
            </div>
            <div class="card-body text-secondary">

                <form action="/suppliers/<%= thisSupplier._id %>?_method=PUT" method="POST" novalidate
                    class="validated-form">
                    <div class="mb-3">
                        <label for="supplierName" class="form-label">Supplier Name</label>
                        <input type="text" class="form-control" id="supplierName" name="supplier[name]"
                            value="<%= thisSupplier.name %>" required>
                        <div class="valid-feedback">
                            Thank you!
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="accountType" class="form-label">Type of Account</label>
                        <select class="form-control" id="accountType" name="supplier[accountType]">
                            <option value="">Select an account</option>
                            <% accounts.forEach(account=> { %>
                                <option value="<%= account._id %>" <%=thisSupplier.accountType &&
                                    thisSupplier.accountType.toString()===account._id.toString() ? 'selected' : '' %>>
                                    <%= account.code %> - <%= account.name %>
                                </option>
                                <% }) %>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="taxes" class="form-label">Applicable taxes:</label>
                        <select class="form-control" id="taxes" name="supplier[taxes]">
                            <option value="" selected>Select </option>
                            <option value="null" <%=thisSupplier.taxes==='null' ? 'selected' : '' %>>None (0%)</option>
                            <option value="exempt" <%=thisSupplier.taxes==='exempt' ? 'selected' : '' %>>Exempt (0%)
                            </option>
                            <option value="gstpst" <%=thisSupplier.taxes==='gstpst' ? 'selected' : '' %>>GST / PST
                                (14.975%)</option>
                            <option value="gst" <%=thisSupplier.taxes==='gst' ? 'selected' : '' %>>GST (5%)</option>
                            <option value="pst" <%=thisSupplier.taxes==='pst' ? 'selected' : '' %>>PST (9.975%)</option>
                            <option value="hst" <%=thisSupplier.taxes==='hst' ? 'selected' : '' %>>HST (13%)</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="contact" class="form-label">Contact Name</label>
                        <input type="text" class="form-control" id="contact" name="supplier[contact]"
                            value="<%= thisSupplier.contact %>">
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" name="supplier[email]"
                            value="<%= thisSupplier.email %>">
                    </div>
                    <div class="mb-3">
                        <label for="website" class="form-label">Website</label>
                        <input type="text" class="form-control" id="website" name="supplier[website]"
                            value="<%= thisSupplier.website %>">
                    </div>
                    <div class="mb-3">
                        <label for="phone" class="form-label">Phone Number</label>
                        <input type="text" class="form-control" id="phone" name="supplier[phone]"
                            value="<%= thisSupplier.phone %>">
                    </div>
                    <div class="mb-3">
                        <label for="cell" class="form-label">Cell Number</label>
                        <input type="text" class="form-control" id="cell" name="supplier[cell]"
                            value="<%= thisSupplier.cell %>">
                    </div>
                    <div class="mb-3">
                        <label for="fax" class="form-label">Fax Number</label>
                        <input type="text" class="form-control" id="fax" name="supplier[fax]"
                            value="<%= thisSupplier.fax %>">
                    </div>
                    <div class="mb-3">
                        <label for="notes" class="form-label">Notes</label>
                        <input type="text" class="form-control" id="notes" name="supplier[notes]"
                            value="<%= thisSupplier.notes %>">
                    </div>
                    <div class="mb-3">
                        <label for="chequeName" class="form-label">Name on cheques</label>
                        <input type="text" class="form-control" id="chequeName" name="supplier[chequeName]"
                            value="<%= thisSupplier.chequeName %>">
                    </div>
                    <div class="mb-3">
                        <h4>Address</h4>
                        <label for="addressStreet" class="form-label">Street Address</label>
                        <input type="text" class="form-control" id="addressStreet" name="supplier[addressStreet]"
                            value="<%= thisSupplier.addressStreet %>">
                        <label for="addressCity" class="form-label">City</label>
                        <input type="text" class="form-control" id="addressCity" name="supplier[addressCity]"
                            value="<%= thisSupplier.addressCity %>">
                        <label for="addressState" class="form-label">State / Province</label>
                        <input type="text" class="form-control" id="addressState" name="supplier[addressState]"
                            value="<%= thisSupplier.addressState %>">
                        <label for="addressCode" class="form-label">Zip / Postal Code</label>
                        <input type="text" class="form-control" id="addressCode" name="supplier[addressCode]"
                            value="<%= thisSupplier.addressCode %>">
                        <label for="addressCountry" class="form-label">Country</label>
                        <input type="text" class="form-control" id="addressCountry" name="supplier[addressCountry]"
                            value="<%= thisSupplier.addressCountry %>">
                    </div>
                    <button class="btn btn-outline-info-subtle bg-info-subtle">Update supplier</button>
                </form>

            </div>
            <div class="card-footer">
                <a href="/suppliers/<%= thisSupplier._id %>">Cancel</a>
            </div>
        </div>
    </div>