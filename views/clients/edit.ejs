<% layout('layouts/boilerplate') %>

    <div class="col-6 offset-3">
        <h1 class="mt-3 mb-3">
            Edit Client Infos
        </h1>
        <div class="card border-secondary mb-3">
            <div class="card-header">
                <h3>
                    <%= thisClient.clientName %>
                </h3>
            </div>
            <div class="card-body text-secondary">

                <form action="/clients/<%= thisClient._id %>?_method=PUT" method="POST" novalidate
                    class="validated-form">
                    <div class="mb-3">
                        <label for="clientName" class="form-label">Client Name</label>
                        <input type="text" class="form-control" id="clientName" name="client[clientName]"
                            value="<%= thisClient.clientName %>" required>
                        <div class="valid-feedback">
                            Thank you!
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="firstName" class="form-label">First Name</label>
                        <input type="text" class="form-control" id="firstName" name="client[firstName]"
                            value="<%= thisClient.firstName %>">
                    </div>
                    <div class="mb-3">
                        <label for="lastName" class="form-label">Last Name</label>
                        <input type="text" class="form-control" id="lastName" name="client[lastName]"
                            value="<%= thisClient.lastName %>">
                    </div>
                    <div class="mb-3">
                        <label for="phone" class="form-label">Phone Number</label>
                        <input type="text" class="form-control" id="phone" name="client[phone]"
                            value="<%= thisClient.phone %>">
                    </div>
                    <div class="mb-3">
                        <label for="cell" class="form-label">Mobile Number</label>
                        <input type="text" class="form-control" id="cell" name="client[cell]"
                            value="<%= thisClient.cell %>">
                    </div>
                    <div class="mb-3">
                        <label for="fax" class="form-label">Fax Number</label>
                        <input type="text" class="form-control" id="fax" name="client[fax]"
                            value="<%= thisClient.fax %>">
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" name="client[email]"
                            value="<%= thisClient.email %>">
                    </div>
                    <div class="mb-3">
                        <label for="taxes" class="form-label">Applicable taxes:</label>
                        <select class="form-control" id="taxes" name="client[taxes]" required>
                            <option value="" disabled <%=!thisClient.taxes ? 'selected' : '' %>>Select</option>
                            <option value="null" <%=thisClient.taxes==='null' ? 'selected' : '' %>>None (0%)</option>
                            <option value="exempt" <%=thisClient.taxes==='exempt' ? 'selected' : '' %>>Exempt (0%)
                            </option>
                            <option value="gstpst" <%=thisClient.taxes==='gstpst' ? 'selected' : '' %>>GST / PST
                                (14.975%)</option>
                            <option value="gst" <%=thisClient.taxes==='gst' ? 'selected' : '' %>>GST (5%)</option>
                            <option value="pst" <%=thisClient.taxes==='pst' ? 'selected' : '' %>>PST (9.975%)</option>
                            <option value="hst" <%=thisClient.taxes==='hst' ? 'selected' : '' %>>HST (13%)</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="terms" class="form-label">Default terms:</label>
                        <select class="form-control" id="terms" name="client[terms]" required>
                            <option value="" disabled <%=!thisClient.terms ? 'selected' : '' %>>Select</option>
                            <option value="0" <%=String(thisClient.terms)==='0' ? 'selected' : '' %>>COD</option>
                            <option value="7" <%=String(thisClient.terms)==='7' ? 'selected' : '' %>>7 days</option>
                            <option value="14" <%=String(thisClient.terms)==='14' ? 'selected' : '' %>>14 days</option>
                            <option value="30" <%=String(thisClient.terms)==='30' ? 'selected' : '' %>>30 days</option>
                            <option value="60" <%=String(thisClient.terms)==='60' ? 'selected' : '' %>>60 days</option>
                            <option value="90" <%=String(thisClient.terms)==='90' ? 'selected' : '' %>>90 days</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="salesRep" class="form-label">Representative:</label>
                        <select class="form-control" id="salesRep" name="client[salesRep]">
                            <option value="" <%=!thisClient.salesRep ? 'selected' : '' %>>None</option>
                            <% users.forEach(user=> { %>
                                <option value="<%= user._id %>" <%=thisClient.salesRep &&
                                    thisClient.salesRep.toString()===user._id.toString() ? 'selected' : '' %>>
                                    <%= user.firstName %>
                                        <%= user.lastName %> (<%= user.email %>)
                                </option>
                                <% }) %>
                        </select>
                        <div class="valid-feedback">
                            Thank you!
                        </div>
                    </div>
                    <div class="mb-3">
                        <h4>Address</h4>
                        <label for="invoiceStreet" class="form-label">Street Address</label>
                        <input type="text" class="form-control" id="invoiceStreet" name="client[invoiceStreet]"
                            value="<%= thisClient.invoiceStreet %>">
                        <label for="invoiceCity" class="form-label">City</label>
                        <input type="text" class="form-control" id="invoiceCity" name="client[invoiceCity]"
                            value="<%= thisClient.invoiceCity %>">
                        <label for="invoiceState" class="form-label">State / Province</label>
                        <input type="text" class="form-control" id="invoiceState" name="client[invoiceState]"
                            value="<%= thisClient.invoiceState %>">
                        <label for="invoiceCode" class="form-label">Zip / Postal Code</label>
                        <input type="text" class="form-control" id="invoiceCode" name="client[invoiceCode]"
                            value="<%= thisClient.invoiceCode %>">
                        <label for="invoiceCountry" class="form-label">Country</label>
                        <input type="text" class="form-control" id="invoiceCountry" name="client[invoiceCountry]"
                            value="<%= thisClient.invoiceCountry %>">
                    </div>
                    <div class="mb-3">
                        <h4>Shipping Address</h4>
                        <label for="shipStreet" class="form-label">Street Address</label>
                        <input type="text" class="form-control" id="shipStreet" name="client[shipStreet]"
                            value="<%= thisClient.shipStreet %>">
                        <label for="shipCity" class="form-label">City</label>
                        <input type="text" class="form-control" id="shipCity" name="client[shipCity]"
                            value="<%= thisClient.shipCity %>">
                        <label for="shipState" class="form-label">State / Province</label>
                        <input type="text" class="form-control" id="shipState" name="client[shipState]"
                            value="<%= thisClient.shipState %>">
                        <label for="shipCode" class="form-label">Zip / Postal Code</label>
                        <input type="text" class="form-control" id="shipCode" name="client[shipCode]"
                            value="<%= thisClient.shipCode %>">
                        <label for="shipCountry" class="form-label">Country</label>
                        <input type="text" class="form-control" id="shipCountry" name="client[shipCountry]"
                            value="<%= thisClient.shipCountry %>">
                    </div>
                    <button class="btn btn-outline-info-subtle bg-info-subtle">Update client</button>
                </form>

            </div>
            <div class="card-footer">
                <a href="/clients/<%= thisClient._id %>">Cancel</a>
            </div>
        </div>
    </div>